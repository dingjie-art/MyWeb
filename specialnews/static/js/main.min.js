var isPhone=$("html").hasClass("mobile"),isTablet=$("html").hasClass("tablet"),isDesk=$("html").hasClass("desktop"),page=$("#page"),pagePath=$("body").data("pagePath"),pageWidth=0,navWidth=0,lightB=lity(),navisopen=!1,targetX=0,canvas,menuOpen=!1;app={init:function(){"ie"==Detectizr.browser.name&&Detectizr.browser.major<=11&&($("html").removeClass("tablet"),$("html").addClass("desktop"),isTablet=!1,isDesk=!0),app.bindEvents(),app.currentPage(),app.animateCC(),isPhone||(app.setWidth(),$(".type-video iframe").detach()),$(window).resize(function(){isPhone||app.setWidth()})},bindEvents:function(){$("#mainNavToggle").click(function(){app.menuToggle()})},fontsActive:function(){isPhone||app.preloadPage()},preloadPage:function(){var e=$(".story:nth-of-type(1)"),t=$(".story:nth-of-type(2)"),a=$(".story:nth-of-type(3)");$(e).css({x:160,opacity:0}),$(t).css({x:160,opacity:0}),$(a).css({x:160,opacity:0}),$(".preloader").fadeOut("fast"),$(e).transition({x:0,opacity:1},400,"easeOutQuad"),$(t).transition({x:0,opacity:1,delay:300},400,"easeOutQuad"),$(a).transition({x:0,opacity:1,delay:600},400,"easeOutQuad"),$(".story").css("opacity","1"),isDesk&&app.scrollHijack()},setWidth:function(){pageWidth=0,$(".story").width(""),$(".story").each(function(){$(this).width(Math.floor($(this).width())),pageWidth+=$(this).width()}),navWidth=0,$(".bar").each(function(){navWidth+=$(this).width()}),pageWidth+=navWidth,page.css("width",pageWidth)},scrollHijack:function(){var e=0,t=.2,a=document.getElementById("page");VirtualScroll.on(function(e){targetX+=e.deltaY,targetX=Math.max((pageWidth-window.innerWidth)*-1,targetX),targetX=Math.min(0,targetX)});var i=function(){requestAnimationFrame(i),e+=(targetX-e)*t;var s="translateX("+e+"px) translateZ(0)",n=a.style;n.transform=s,n.webkitTransform=s,n.mozTransform=s,n.msTransform=s};i()},currentPage:function(){thisPage=$(page).data("pagename"),$(".menu__links a").each(function(){$(this).removeClass("current"),$(this).data("linkname")===thisPage&&$(this).addClass("current")})},menuToggle:function(){var e=$("#mainNav"),t=$("#mainNavToggle");$(e).toggleClass("active"),menuOpen?($(t).removeClass("active").addClass("inactive"),menuOpen=!1):($(t).removeClass("inactive").addClass("active"),menuOpen=!0),navisopen?($(e).css("transition-delay","0.25s"),$(e).find(".animated").removeClass("fadeInUp").addClass("fadeOutDown"),navisopen=!1):($(e).css("transition-delay","0s"),$(e).find(".animated").addClass("fadeInUp").removeClass("fadeOutDown"),navisopen=!0)},animateCC:function(){$("canvas.anicc").each(function(){function e(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function t(e){var t=e.target,a=t.getResult(s);a.images[0]=i,ss[s]=new createjs.SpriteSheet(a),exportRoot=new window[n].canvas,stage=new createjs.Stage(o),stage.addChild(exportRoot),stage.update(),createjs.Ticker.setFPS(window[n].properties.fps),createjs.Ticker.addEventListener("tick",stage)}var a,i,s=!1;$(this).data("sprite")&&(s=$(this).data("sprite")+"_atlas_",a=$(this).data("spritepath"),i=a.replace(/\.[^\.]+$/,".jpg"));var n=$(this).data("ani"),o=$(this)[0];if(images=images||{},ss=ss||{},0!=s){var r=new createjs.LoadQueue((!1));r.addEventListener("fileload",e),r.addEventListener("complete",t),r.loadFile({src:a,type:createjs.AbstractLoader.JSON,id:s},!0)}else exportRoot=new window[n].canvas,stage=new createjs.Stage(o),stage.addChild(exportRoot),stage.update(),createjs.Ticker.setFPS(window[n].properties.fps),createjs.Ticker.addEventListener("tick",stage);$(o).attr("width",window[n].properties.width),$(o).attr("height",window[n].properties.height),$(o).css({"background-color":window[n].properties.color})})},newfunction:function(){}},jQuery(document).ready(function(){app.init()});
//# sourceMappingURL=maps/main.min.js.map
